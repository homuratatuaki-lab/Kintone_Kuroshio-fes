<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>祭典団体状況 一括同期プラグイン - 設定</title>
</head>
<body>
  <div id="config-container">
    <p id="config-loading" class="config-loading" style="display:none;">読み込み中…</p>
    <div id="config-error-message" class="config-error" role="alert" style="display:none;"></div>

    <section class="config-card">
      <h2>1. チェックする申請書（申込書など）</h2>
      <table id="child-app-table" class="config-table">
        <thead>
          <tr>
            <th>申請書アプリ</th>
            <th>申請書側の紐付けキー</th>
            <th>連携モード</th>
            <th>コピー元（モードで使用時）</th>
            <th>団体一覧に表示する欄</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="child-app-tbody"></tbody>
      </table>
      <button type="button" id="add-child-row" class="btn btn-secondary">+ 申請書を1件追加</button>
    </section>

    <section class="config-card">
      <h2>2. 共通の紐付けキー</h2>
      <table class="config-table single-table">
        <tbody>
          <tr>
            <th>団体一覧アプリの紐付けキー</th>
            <td><select id="parent-group-id-field" title="団体ごとに同じ値が入るフィールド"></select></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="config-card">
      <h2>3. 連絡先への自動反映（任意）</h2>
      <table class="config-table single-table">
        <tbody>
          <tr>
            <th>連絡先アプリ</th>
            <td>
              <div class="app-select-row">
                <select id="contact-app-id" title="アプリを選択"></select>
                <button type="button" id="contact-app-verify" class="btn btn-verify">アプリ名を確認</button>
              </div>
              <span id="contact-app-name-display" class="app-name-display"></span>
            </td>
          </tr>
          <tr>
            <th>連絡先アプリの紐付けキー</th>
            <td><select id="contact-group-id-field" title="団体IDと同じ値のフィールド"></select></td>
          </tr>
          <tr>
            <th>連絡先に表示する欄</th>
            <td><select id="contact-target-field" title="同期結果を表示するフィールド"></select></td>
          </tr>
        </tbody>
      </table>
    </section>

    <div class="actions">
      <button type="button" id="btn-cancel" class="btn btn-secondary">キャンセル</button>
      <button type="button" id="btn-save" class="btn btn-primary">保存</button>
    </div>
  </div>
</body>
</html>
